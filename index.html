<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Tagline Manager</title>
    <script src="https://www.gstatic.com/firebasejs/10.7.1/firebase-app.js"></script>
    <script src="https://www.gstatic.com/firebasejs/10.7.1/firebase-auth.js"></script>
    <script src="https://www.gstatic.com/firebasejs/10.7.1/firebase-firestore.js"></script>
    <script src="https://www.gstatic.com/firebasejs/10.7.1/firebase-storage.js"></script>
    <style>
        body { font-family: Arial, sans-serif; text-align: center; }
        #auth-container, #content-container { margin: 20px; }
        input, button { margin: 10px; padding: 8px; }
        ul { list-style: none; padding: 0; }
    </style>
</head>
<body>
    <div id="auth-container">
        <input type="email" id="email" placeholder="Enter email">
        <input type="password" id="password" placeholder="Enter password">
        <button onclick="signUp()">Sign Up</button>
        <button onclick="signIn()">Sign In</button>
        <button onclick="signOut()">Sign Out</button>
    </div>
    
    <div id="content-container" style="display:none;">
        <input type="text" id="tagline" placeholder="Enter tagline">
        <input type="file" id="imageUpload">
        <button onclick="addTagline()">Add Tagline</button>
        <ul id="tagline-list"></ul>
    </div>

    <script>
        const firebaseConfig = {
            apiKey: "YOUR_API_KEY",
            authDomain: "YOUR_AUTH_DOMAIN",
            projectId: "YOUR_PROJECT_ID",
            storageBucket: "YOUR_STORAGE_BUCKET",
            messagingSenderId: "YOUR_MESSAGING_SENDER_ID",
            appId: "YOUR_APP_ID"
        };

        firebase.initializeApp(firebaseConfig);
        const auth = firebase.auth();
        const db = firebase.firestore();
        const storage = firebase.storage();

        function signUp() {
            const email = document.getElementById("email").value;
            const password = document.getElementById("password").value;
            auth.createUserWithEmailAndPassword(email, password)
                .then(() => alert("User signed up!"))
                .catch(error => alert(error.message));
        }

        function signIn() {
            const email = document.getElementById("email").value;
            const password = document.getElementById("password").value;
            auth.signInWithEmailAndPassword(email, password)
                .then(() => {
                    alert("Signed in!");
                    document.getElementById("auth-container").style.display = "none";
                    document.getElementById("content-container").style.display = "block";
                    loadTaglines();
                })
                .catch(error => alert(error.message));
        }

        function signOut() {
            auth.signOut().then(() => {
                alert("Signed out!");
                document.getElementById("auth-container").style.display = "block";
                document.getElementById("content-container").style.display = "none";
            });
        }

        function addTagline() {
            const tagline = document.getElementById("tagline").value;
            const file = document.getElementById("imageUpload").files[0];
            if (!tagline) return alert("Enter a tagline");
            
            if (file) {
                const storageRef = storage.ref('images/' + file.name);
                storageRef.put(file).then(snapshot => {
                    snapshot.ref.getDownloadURL().then(url => {
                        saveTaglineToDB(tagline, url);
                    });
                });
            } else {
                saveTaglineToDB(tagline, "");
            }
        }

        function saveTaglineToDB(tagline, imageUrl) {
            db.collection("taglines").add({ text: tagline, image: imageUrl })
                .then(() => {
                    alert("Tagline added!");
                    document.getElementById("tagline").value = "";
                    document.getElementById("imageUpload").value = "";
                    loadTaglines();
                })
                .catch(error => alert(error.message));
        }

        function loadTaglines() {
            db.collection("taglines").get().then(snapshot => {
                const list = document.getElementById("tagline-list");
                list.innerHTML = "";
                snapshot.forEach(doc => {
                    const li = document.createElement("li");
                    li.innerHTML = `${doc.data().text} <br> <img src="${doc.data().image}" width="100">`;
                    list.appendChild(li);
                });
            });
        }
    </script>
</body>
</html>
