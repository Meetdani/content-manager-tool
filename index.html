<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Creative Management Tool</title>
    <script src="https://www.gstatic.com/firebasejs/8.10.0/firebase-app.js"></script>
    <script src="https://www.gstatic.com/firebasejs/8.10.0/firebase-firestore.js"></script>
    <style>
        body { font-family: Arial, sans-serif; margin: 20px; }
        .container { max-width: 800px; margin: auto; }
        table { width: 100%; border-collapse: collapse; margin-top: 20px; }
        th, td { border: 1px solid black; padding: 10px; text-align: left; }
        .form-group { margin-bottom: 15px; }
        button { padding: 10px; cursor: pointer; }
    </style>
</head>
<body>
    <div class="container">
        <h2>Client Management</h2>
        <div class="form-group">
            <input type="text" id="clientName" placeholder="Enter Client Name">
            <button onclick="addClient()">Add Client</button>
        </div>
        <ul id="clientList"></ul>

        <h2>Project Management</h2>
        <div class="form-group">
            <select id="clientSelect"></select>
            <input type="text" id="projectName" placeholder="Enter Project Name">
            <button onclick="addProject()">Add Project</button>
        </div>
        <ul id="projectList"></ul>
    </div>

    <script>
        var firebaseConfig = {
            apiKey: "AIzaSyAJRGM_vToOyUyQ3jtDmPe_mp9vYDHnZRk",
            authDomain: "meet-cms.firebaseapp.com",
            projectId: "meet-cms",
            storageBucket: "meet-cms.firebasestorage.app",
            messagingSenderId: "587862242729",
            appId: "1:587862242729:web:ecd1c2da6cde2eca4580b8"
        };
        firebase.initializeApp(firebaseConfig);
        var db = firebase.firestore();

        function addClient() {
            let clientName = document.getElementById("clientName").value;
            if (clientName === "") return;
            db.collection("clients").add({ name: clientName })
                .then(() => {
                    document.getElementById("clientName").value = "";
                    loadClients();
                });
        }

        function loadClients() {
            let clientSelect = document.getElementById("clientSelect");
            let clientList = document.getElementById("clientList");
            clientSelect.innerHTML = "";
            clientList.innerHTML = "";
            db.collection("clients").get().then((querySnapshot) => {
                querySnapshot.forEach((doc) => {
                    let client = doc.data();
                    let option = document.createElement("option");
                    option.value = doc.id;
                    option.textContent = client.name;
                    clientSelect.appendChild(option);
                    let li = document.createElement("li");
                    li.textContent = client.name;
                    clientList.appendChild(li);
                });
            });
        }

        function addProject() {
            let clientId = document.getElementById("clientSelect").value;
            let projectName = document.getElementById("projectName").value;
            if (clientId === "" || projectName === "") return;
            db.collection("clients").doc(clientId).collection("projects").add({ name: projectName })
                .then(() => {
                    document.getElementById("projectName").value = "";
                    loadProjects(clientId);
                });
        }

        function loadProjects(clientId) {
            let projectList = document.getElementById("projectList");
            projectList.innerHTML = "";
            db.collection("clients").doc(clientId).collection("projects").get()
                .then((querySnapshot) => {
                    querySnapshot.forEach((doc) => {
                        let project = doc.data();
                        let li = document.createElement("li");
                        li.textContent = project.name;
                        projectList.appendChild(li);
                    });
                });
        }

        loadClients();
    </script>
</body>
</html>
